==============================================================================
NFC ë³‘ì› ì•ˆë‚´ ì‹œìŠ¤í…œ - ì‹¤ì œ ì½”ë“œ ë¶„ì„ ë° ë¬¸ì œì  ì •ë¦¬
==============================================================================
ë¶„ì„ì¼: 2025-09-09
ë¶„ì„ì: Claude Code
êµìˆ˜ë‹˜ í”¼ë“œë°± ë°˜ì˜: 2025-09-09 ë©´ë‹´ ë‚´ìš© ê¸°ë°˜

==============================================================================
1. ì‹¤ì œ ì½”ë“œ ë¶„ì„ ê²°ê³¼ - êµ¬ì²´ì ì¸ ë¬¸ì œì 
==============================================================================

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”´ í•µì‹¬ ë¬¸ì œ 1: ìƒíƒœ ê´€ë¦¬ì˜ ì´ì›í™” (ê°€ì¥ ì‹¬ê°)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[í˜„ì¬ ìƒí™©]
- 2ê°œì˜ ìƒíƒœ ì²´ê³„ê°€ ë¶„ë¦¬ ìš´ì˜ë˜ê³  ìˆìŒ:
  * PatientJourneyState: 9ë‹¨ê³„ í™˜ì ì „ì²´ ì—¬ì • (UNREGISTERED ~ FINISHED)
  * QueueDetailState: 7ë‹¨ê³„ ëŒ€ê¸°ì—´ ì„¸ë¶€ ìƒíƒœ (waiting ~ cancelled)

[êµ¬ì²´ì  ì½”ë“œ ì¦ê±°]
íŒŒì¼: backend/nfc_hospital_system/common/state_definitions.py
```python
class PatientJourneyState(Enum):
    UNREGISTERED = 'UNREGISTERED'
    ARRIVED = 'ARRIVED'
    REGISTERED = 'REGISTERED'
    WAITING = 'WAITING'
    CALLED = 'CALLED'
    IN_PROGRESS = 'IN_PROGRESS'
    COMPLETED = 'COMPLETED'
    PAYMENT = 'PAYMENT'
    FINISHED = 'FINISHED'

class QueueDetailState(Enum):
    WAITING = 'waiting'
    DELAYED = 'delayed'
    CALLED = 'called'
    NO_SHOW = 'no_show'
    IN_PROGRESS = 'in_progress'
    COMPLETED = 'completed'
    CANCELLED = 'cancelled'
```

[ë™ê¸°í™” ë¬¸ì œ]
íŒŒì¼: backend/nfc_hospital_system/p_queue/services.py
```python
def sync_from_queue_update(self, queue: Queue):
    # Queue â†’ PatientState ë™ê¸°í™”
    journey_state = QUEUE_TO_JOURNEY_MAPPING.get(queue_state)
    
def sync_from_patient_state(self, patient_state: PatientState):
    # PatientState â†’ Queue ë™ê¸°í™”
    queue_state = JOURNEY_TO_QUEUE_MAPPING.get(journey_state)
```

[ë¬¸ì œì ]
1. ì–‘ë°©í–¥ ë™ê¸°í™”ë¡œ ì¸í•œ ìˆœí™˜ ì°¸ì¡° ìœ„í—˜
2. ì–´ëŠ ê²ƒì´ ì§„ì‹¤ì˜ ì›ì²œ(Single Source of Truth)ì¸ì§€ ë¶ˆëª…í™•
3. ìƒíƒœ ë³€ê²½ ì‹œ 2ê³³ì„ ëª¨ë‘ ì—…ë°ì´íŠ¸í•´ì•¼ í•¨
4. ë§¤í•‘ ë¡œì§ì´ ë³µì¡í•˜ê³  ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ì„± ë†’ìŒ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”´ í•µì‹¬ ë¬¸ì œ 2: ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ì‹¤íŒ¨ (êµìˆ˜ë‹˜ ì§€ì ì‚¬í•­)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[í˜„ì¬ ìƒí™©]
- ê°€ìƒ ë°ì´í„°ì™€ í™”ë©´ í˜ì´ì§€ ê°„ì˜ ë°ì´í„° ë™ê¸°í™” ì•ˆ ë¨
- ê° ëª¨ë“ˆì´ ë…ë¦½ì ìœ¼ë¡œ ì‘ë™í•˜ì—¬ í†µí•© ì•ˆ ë¨

[êµ¬ì²´ì  ì½”ë“œ ì¦ê±°]
íŒŒì¼: frontend-pwa/src/components/admin/dashboard/OperationalMonitor.jsx
```javascript
useEffect(() => {
    const updateData = () => {
      const deptData = [
        { 
          waitingPatients: Math.floor(15 + Math.random() * 20),  // ëœë¤ ë°ì´í„°
          avgWaitTime: Math.floor(25 + Math.random() * 15),      // ëœë¤ ë°ì´í„°
        }
      ];
      setDepartments(deptData);
    };
    updateData();
    const interval = setInterval(updateData, 15000);
}, []);
```

íŒŒì¼: frontend-pwa/src/components/admin/dashboard/LSTMPrediction.jsx
```javascript
// ì‹¤ì œ LSTM ëª¨ë¸ ì—†ì´ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‹œë®¬ë ˆì´ì…˜
const waitTime = Math.round(
    dept.baseline + (dept.peak - dept.baseline) * peakFactor * 0.7 + randomVariation
);
```

[ë¬¸ì œì ]
1. ì‹¤ì œ Queue ë°ì´í„°ì™€ ì—°ê²°ë˜ì§€ ì•ŠìŒ
2. Analytics APIëŠ” êµ¬í˜„ë˜ì–´ ìˆìœ¼ë‚˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
3. WebSocketì€ ëŒ€ê¸°ì—´ ìƒíƒœë§Œ ì „ì†¡, ëŒ€ì‹œë³´ë“œëŠ” ë¯¸ì—°ë™
4. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê°€ì§œ ë°ì´í„° ìƒì„±

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”´ í•µì‹¬ ë¬¸ì œ 3: ì§„ë£Œ vs ê²€ì‚¬ êµ¬ë¶„ ì—†ìŒ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[í˜„ì¬ ìƒí™©]
- Appointment ëª¨ë¸ì— ì§„ë£Œ/ê²€ì‚¬ êµ¬ë¶„ ì—†ìŒ
- Exam ëª¨ë¸ë§Œ ì¡´ì¬ (Doctor ëª¨ë¸ ì—†ìŒ)
- ì˜ì‚¬ë³„ ëŒ€ê¸° ì‹œê°„ ê³ ë ¤ ì•ˆ ë¨

[êµ¬ì²´ì  ì½”ë“œ ì¦ê±°]
íŒŒì¼: backend/nfc_hospital_system/appointments/models.py
```python
class Appointment(models.Model):
    exam = models.ForeignKey('Exam', ...)  # ê²€ì‚¬ë§Œ ì°¸ì¡°
    # doctor í•„ë“œ ì—†ìŒ
    # appointment_type í•„ë“œ ì—†ìŒ
    # consultation ê´€ë ¨ í•„ë“œ ì „ë¬´
```

[ë¬¸ì œì ]
1. ì§„ë£Œ í”„ë¡œì„¸ìŠ¤ ì „ì²´ ëˆ„ë½
2. ì˜ì‚¬ë³„ ìŠ¤ì¼€ì¤„ ê´€ë¦¬ ë¶ˆê°€
3. ì§„ë£Œì‹¤ ëŒ€ê¸°ì™€ ê²€ì‚¬ì‹¤ ëŒ€ê¸° êµ¬ë¶„ ë¶ˆê°€
4. í˜„ëŒ€ë³‘ì› í”¼ë“œë°±: "ê²€ì‚¬ ìœ„ì£¼ë¡œë§Œ ë˜ì–´ ìˆìŒ"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”´ í•µì‹¬ ë¬¸ì œ 4: í”„ë¡ íŠ¸ì—”ë“œì˜ í•˜ë“œì½”ë”©ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[í˜„ì¬ ìƒí™©]
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë°±ì—”ë“œê°€ ì•„ë‹Œ í”„ë¡ íŠ¸ì—”ë“œì— í•˜ë“œì½”ë”©

[êµ¬ì²´ì  ì½”ë“œ ì¦ê±°]
íŒŒì¼: frontend-pwa/src/store/journeyStore.js
```javascript
getNextExam: () => {
  if (patientState === 'PAYMENT') {
    return {
      exam_id: 'payment_desk',
      title: 'ìˆ˜ë‚©ì°½êµ¬',
      building: 'ë³¸ê´€',
      floor: '1',
      room: 'ì›ë¬´ê³¼',
      x_coord: 420,  // í•˜ë“œì½”ë”©ëœ ì¢Œí‘œ
      y_coord: 380,  // í•˜ë“œì½”ë”©ëœ ì¢Œí‘œ
      description: 'ìˆ˜ë‚©ì°½êµ¬ì—ì„œ ì§„ë£Œë¹„ë¥¼ ìˆ˜ë‚©í•´ì£¼ì„¸ìš”'
    };
  }
  
  if (patientState === 'FINISHED') {
    return {
      exam_id: 'main_entrance',
      title: 'ì •ë¬¸',
      x_coord: 150,  // í•˜ë“œì½”ë”©ëœ ì¢Œí‘œ
      y_coord: 400,  // í•˜ë“œì½”ë”©ëœ ì¢Œí‘œ
    };
  }
}
```

[ë¬¸ì œì ]
1. ë³‘ì› ë ˆì´ì•„ì›ƒ ë³€ê²½ ì‹œ í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì • í•„ìš”
2. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œ
3. ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œ ë¡œì§ ë¶ˆì¼ì¹˜ ê°€ëŠ¥
4. í…ŒìŠ¤íŠ¸ ë° ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”´ í•µì‹¬ ë¬¸ì œ 5: WebSocketê³¼ HTTP API ì¤‘ë³µ êµ¬í˜„
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[í˜„ì¬ ìƒí™©]
- ê°™ì€ ê¸°ëŠ¥ì„ WebSocketê³¼ HTTP 2ê°€ì§€ë¡œ êµ¬í˜„

[êµ¬ì²´ì  ì½”ë“œ ì¦ê±°]
íŒŒì¼: frontend-pwa/src/hooks/usePatientJourney.js
```javascript
const performAction = useCallback(async (actionType, payload = {}) => {
    // WebSocketì´ ì—°ê²°ë˜ì–´ ìˆìœ¼ë©´ WebSocket ì‚¬ìš©
    if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {
      wsRef.current.send(JSON.stringify({
        command: 'perform_action',
        action_type: actionType,
        payload
      }));
      return;
    }
    
    // WebSocketì´ ì—°ê²°ë˜ì§€ ì•Šì€ ê²½ìš° HTTP í´ë°±
    try {
      const data = await PatientJourneyAPI.performAction(actionType, payload);
      updateState(data);
      return data;
    } catch (error) {
      // ...
    }
}, []);
```

[ë¬¸ì œì ]
1. ì½”ë“œ ì¤‘ë³µìœ¼ë¡œ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
2. ë™ê¸°í™” ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
3. ë””ë²„ê¹… ë³µì¡ë„ ì¦ê°€
4. ì¼ê´€ì„± ì—†ëŠ” ì‘ë‹µ í˜•ì‹ ê°€ëŠ¥

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”´ í•µì‹¬ ë¬¸ì œ 6: AI ê¸°ëŠ¥ ë¶€ì¬ (êµìˆ˜ë‹˜ ì§€ì ì‚¬í•­)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[í˜„ì¬ ìƒí™©]
- LSTM ëª¨ë¸ ë°±ì—”ë“œ êµ¬í˜„ ì—†ìŒ
- í”„ë¡ íŠ¸ì—”ë“œ ì‹œë®¬ë ˆì´ì…˜ë§Œ ì¡´ì¬
- "AI ê¸°ë°˜" ì‹œìŠ¤í…œì´ë¼ëŠ” ì •ì²´ì„± ë¶€ì¡±

[êµ¬ì²´ì  ì¦ê±°]
```bash
$ grep -r "LSTM" backend/
# No results (ë°±ì—”ë“œì— LSTM êµ¬í˜„ ì—†ìŒ)

$ grep -r "tensorflow\|pytorch\|scikit" backend/requirements.txt
# No results (ML ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ìŒ)
```

[ë¬¸ì œì ]
1. ì‹¤ì œ ì˜ˆì¸¡ ê¸°ëŠ¥ ì—†ìŒ
2. ê³¼ê±° ë°ì´í„° í•™ìŠµ ë¶ˆê°€
3. ì •í™•ë„ ê°œì„  ë¶ˆê°€ëŠ¥
4. AI ì‹œìŠ¤í…œì´ë¼ í•  ìˆ˜ ì—†ìŒ

==============================================================================
2. ê°œë…ì ìœ¼ë¡œ ì •ë¦¬í•´ì•¼ í•  ì‚¬í•­
==============================================================================

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ê°œë… 1: ìƒíƒœ ê´€ë¦¬ ë‹¨ì¼í™” (Single Source of Truth)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[í˜„ì¬]
PatientJourneyState (9ë‹¨ê³„) + QueueDetailState (7ë‹¨ê³„) = ë³µì¡í•œ ë§¤í•‘

[ì œì•ˆ] UnifiedPatientState (5ë‹¨ê³„)
```
ARRIVED      â†’ ë³‘ì› ë„ì°©/ì ‘ìˆ˜
WAITING      â†’ ëŒ€ê¸° ì¤‘
IN_PROGRESS  â†’ ì§„í–‰ ì¤‘ (ì§„ë£Œ/ê²€ì‚¬)
PAYMENT      â†’ ìˆ˜ë‚©
COMPLETED    â†’ ì™„ë£Œ/ê·€ê°€
```

[êµ¬í˜„ ë°©ì•ˆ]
```python
class UnifiedPatientState(models.Model):
    state = models.CharField(choices=UNIFIED_STATES)
    queue = models.OneToOneField(Queue, null=True)
    
    def transition_to(self, new_state):
        # ë‹¨ì¼ ì§€ì ì—ì„œ ëª¨ë“  ìƒíƒœ ë³€ê²½ ì²˜ë¦¬
        self.state = new_state
        self.save()
        self.sync_related_models()
        self.broadcast_update()
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ê°œë… 2: ì§„ë£Œ/ê²€ì‚¬ í†µí•© ëª¨ë¸
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[ì œì•ˆ ëª¨ë¸]
```python
class AppointmentType(Enum):
    CONSULTATION = "consultation"  # ì§„ë£Œ
    EXAMINATION = "examination"    # ê²€ì‚¬

class Appointment(models.Model):
    appointment_type = models.CharField(choices=AppointmentType.choices)
    doctor = models.ForeignKey('Doctor', null=True)  # ì§„ë£Œì¼ ë•Œ
    exam = models.ForeignKey('Exam', null=True)      # ê²€ì‚¬ì¼ ë•Œ
    
    def get_destination(self):
        if self.appointment_type == AppointmentType.CONSULTATION:
            return self.doctor.office_location
        else:
            return self.exam.location
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ê°œë… 3: í˜¸ì¶œ í•¨ìˆ˜ ë°©ì‹ì˜ ì„œë¹„ìŠ¤ ë ˆì´ì–´ (êµìˆ˜ë‹˜ ì œì•ˆ)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[ì œì•ˆ êµ¬ì¡°]
```python
class UnifiedJourneyService:
    """ëª¨ë“  ìƒíƒœ ë³€ê²½ì˜ ë‹¨ì¼ ì§„ì…ì """
    
    @transaction.atomic
    def update_patient_state(self, patient_id, new_state, trigger):
        # 1ë‹¨ê³„: ìƒíƒœ ê²€ì¦
        if not self.is_valid_transition(current_state, new_state):
            raise InvalidTransition()
        
        # 2ë‹¨ê³„: PatientState ì—…ë°ì´íŠ¸
        patient_state = PatientState.objects.get(user_id=patient_id)
        patient_state.current_state = new_state
        patient_state.save()
        
        # 3ë‹¨ê³„: Queue ìë™ ë™ê¸°í™”
        if new_state in QUEUE_RELATED_STATES:
            self.sync_queue_state(patient_id, new_state)
        
        # 4ë‹¨ê³„: WebSocket ë¸Œë¡œë“œìºìŠ¤íŠ¸
        self.broadcast_state_change(patient_id, new_state)
        
        # 5ë‹¨ê³„: ë¡œê·¸ ê¸°ë¡
        self.log_state_transition(patient_id, old_state, new_state, trigger)
        
        # 6ë‹¨ê³„: í†µí•© ì‘ë‹µ ë°˜í™˜
        return self.get_unified_response(patient_id)
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ê°œë… 4: ì‹¤ì‹œê°„ ë°ì´í„° íŒŒì´í”„ë¼ì¸
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[ì œì•ˆ ì•„í‚¤í…ì²˜]
```
Queue Model (ì‹¤ì œ ë°ì´í„°)
    â†“
Analytics Service (ì§‘ê³„/ê³„ì‚°)
    â†“
Redis Cache (ì‹¤ì‹œê°„ ìºì‹±)
    â†“
    â”œâ†’ REST API â†’ Dashboard (ì´ˆê¸° ë¡œë“œ)
    â””â†’ WebSocket â†’ Real-time Updates
```

[êµ¬í˜„ ì˜ˆì‹œ]
```python
class RealtimeAnalyticsService:
    def get_department_stats(self, department):
        # 1. Redisì—ì„œ ìºì‹œ í™•ì¸
        cached = redis.get(f"dept_stats:{department}")
        if cached:
            return cached
        
        # 2. ì‹¤ì œ ë°ì´í„° ì§‘ê³„
        stats = Queue.objects.filter(
            exam__department=department,
            state='waiting'
        ).aggregate(
            waiting_count=Count('id'),
            avg_wait_time=Avg('estimated_wait_time')
        )
        
        # 3. Redisì— ìºì‹œ (TTL 5ì´ˆ)
        redis.setex(f"dept_stats:{department}", 5, stats)
        
        # 4. WebSocketìœ¼ë¡œ ë¸Œë¡œë“œìºìŠ¤íŠ¸
        channel_layer.group_send(
            f"dashboard_{department}",
            {"type": "stats_update", "data": stats}
        )
        
        return stats
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ê°œë… 5: LSTM ì ì§„ì  êµ¬í˜„ ì „ëµ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[3ë‹¨ê³„ ì ‘ê·¼ë²•]
```python
# Phase 1: Baseline Model (ì¦‰ì‹œ êµ¬í˜„ ê°€ëŠ¥)
class BaselinePredictor:
    def predict(self, department, hour):
        # ì§€ë‚œ 7ì¼ ê°™ì€ ì‹œê°„ëŒ€ í‰ê· 
        return historical_average

# Phase 2: Simple LSTM (1ì£¼ì¼)
class SimpleLSTM:
    def __init__(self):
        self.model = Sequential([
            LSTM(32, input_shape=(24, 5)),
            Dense(1)
        ])

# Phase 3: Advanced LSTM (2ì£¼ì¼)
class AdvancedLSTM:
    # ë¶€ì„œë³„ íŠ¹í™” ëª¨ë¸
    # ìš”ì¼/ê³µíœ´ì¼ ê³ ë ¤
    # ì‹¤ì‹œê°„ ì¬í•™ìŠµ
```

==============================================================================
3. ì‹¤í–‰ ê³„íš (ìš°ì„ ìˆœìœ„ë³„)
==============================================================================

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Phase 0: ê¸´ê¸‰ ìˆ˜ì • (3ì¼ ë‚´) - "ê¸°ëŠ¥ êµ¬í˜„ í›„ ì„¸ë¶€ì‚¬í•­"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[Day 1] DB ì—°ë™ ë¬¸ì œ í•´ê²°
â–¡ UnifiedJourneyService êµ¬í˜„
â–¡ í˜¸ì¶œ í•¨ìˆ˜ ë°©ì‹ìœ¼ë¡œ ëª¨ë“ˆ ìˆœì°¨ ì‹¤í–‰
â–¡ WebSocket ì´ë²¤íŠ¸ í†µí•©

[Day 2] ìƒíƒœ ë‹¨ìˆœí™”
â–¡ 9ë‹¨ê³„ â†’ 5ë‹¨ê³„ë¡œ ì¶•ì†Œ
â–¡ ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
â–¡ Feature Flag ì„¤ì •

[Day 3] ì‹¤ì œ ë°ì´í„° ì—°ê²°
â–¡ Dashboard API ì‹¤ì œ êµ¬í˜„
â–¡ Queue ë°ì´í„° ì§‘ê³„ ë¡œì§
â–¡ Redis ìºì‹± ì„¤ì •

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Phase 1: LSTM êµ¬í˜„ (1ì£¼ì¼) - "AI ì •ì²´ì„± ê°•í™”"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[Day 4-5] ë°ì´í„° ìˆ˜ì§‘
â–¡ QueueDataCollector êµ¬í˜„
â–¡ ì‹œë“œ ë°ì´í„° 1000+ ìƒì„±
â–¡ í•™ìŠµ ë°ì´í„° ì¤€ë¹„

[Day 6-7] Baseline ëª¨ë¸
â–¡ ì´ë™í‰ê·  ì˜ˆì¸¡ êµ¬í˜„
â–¡ API ì—”ë“œí¬ì¸íŠ¸ ìƒì„±
â–¡ 70% ì •í™•ë„ ë‹¬ì„±

[Day 8-10] LSTM ëª¨ë¸
â–¡ TensorFlow ëª¨ë¸ êµ¬í˜„
â–¡ í•™ìŠµ íŒŒì´í”„ë¼ì¸
â–¡ ì ì§„ì  ê°œì„  ì‹œê°í™”

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Phase 2: ì§„ë£Œ ê¸°ëŠ¥ (ì„ íƒì , 5ì¼) - "ì§„ë£Œ vs ê²€ì‚¬ êµ¬ë¶„"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[Day 11-12] ëª¨ë¸ í™•ì¥
â–¡ Doctor ëª¨ë¸ ì¶”ê°€
â–¡ AppointmentType êµ¬í˜„
â–¡ ì§„ë£Œì‹¤ ëŒ€ê¸° ë¡œì§

[Day 13-15] UI í†µí•©
â–¡ ì§„ë£Œ/ê²€ì‚¬ êµ¬ë¶„ UI
â–¡ ì˜ì‚¬ë³„ ëŒ€ê¸° í‘œì‹œ
â–¡ í†µí•© í…ŒìŠ¤íŠ¸

==============================================================================
4. ì„±ê³µ ì§€í‘œ (êµìˆ˜ë‹˜ ì œì‹œ ê¸°ì¤€)
==============================================================================

ë‹¨ê¸° ëª©í‘œ (1ì£¼ì¼)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ DB ì—°ë™ 100% ì‘ë™
âœ“ ìƒíƒœ 5ë‹¨ê³„ë¡œ ë‹¨ìˆœí™”
âœ“ ëŒ€ì‹œë³´ë“œ ì‹¤ì œ ë°ì´í„° í‘œì‹œ

ì¤‘ê¸° ëª©í‘œ (2ì£¼ì¼)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ LSTM ì˜ˆì¸¡ ì •í™•ë„ 80%+
âœ“ ì£¼ê°„ 2% ê°œì„  ì¦ëª…
âœ“ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì‘ë™

ìµœì¢… ëª©í‘œ (10ì›” ì¤‘ìˆœ)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ LSTM ì˜¤ì°¨ìœ¨ 2-3%
âœ“ ì§„ë£Œ/ê²€ì‚¬ í†µí•© ì™„ë£Œ
âœ“ í˜„ëŒ€ë³‘ì› í”¼ë“œë°± ë°˜ì˜

==============================================================================
5. ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘ ë°©ì•ˆ
==============================================================================

ë¦¬ìŠ¤í¬ 1: ìƒíƒœ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- ì˜í–¥: ê¸°ì¡´ ë°ì´í„° ì†ì‹¤
- ëŒ€ì‘: ë°±ì—… + ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸ ì¤€ë¹„

ë¦¬ìŠ¤í¬ 2: LSTM ì •í™•ë„ ë¯¸ë‹¬
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- ì˜í–¥: AI ê¸°ëŠ¥ ì‹ ë¢°ë„ í•˜ë½
- ëŒ€ì‘: Baseline ëª¨ë¸ ìœ ì§€, ì ì§„ì  ê°œì„ 

ë¦¬ìŠ¤í¬ 3: ì§„ë£Œ ê¸°ëŠ¥ ë³µì¡ë„
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- ì˜í–¥: ê°œë°œ ì§€ì—°
- ëŒ€ì‘: ê²€ì‚¬ ìš°ì„  ì™„ì„±, ì§„ë£ŒëŠ” v2

==============================================================================
6. ì¦‰ì‹œ ê²°ì • í•„ìš” ì‚¬í•­
==============================================================================

1. ìƒíƒœ ë‹¨ìˆœí™” ìˆ˜ì¤€
   â–¡ Option A: 5ë‹¨ê³„ (ì¶”ì²œ)
   â–¡ Option B: 7ë‹¨ê³„
   â–¡ Option C: í˜„í–‰ ìœ ì§€

2. LSTM êµ¬í˜„ ë²”ìœ„
   â–¡ Option A: 1ê°œ ë¶€ì„œ ì‹œì‘ (ì¶”ì²œ)
   â–¡ Option B: ì „ì²´ ë¶€ì„œ
   â–¡ Option C: ì‹œë®¬ë ˆì´ì…˜ ìœ ì§€

3. ì§„ë£Œ ê¸°ëŠ¥ í¬í•¨ ì—¬ë¶€
   â–¡ Option A: ê²€ì‚¬ë§Œ ì§‘ì¤‘ (ì¶”ì²œ)
   â–¡ Option B: ì§„ë£Œ ì¶”ê°€
   â–¡ Option C: ì¶”í›„ ê²°ì •

==============================================================================
ë
==============================================================================

ë³¸ ë¬¸ì„œëŠ” 2025ë…„ 9ì›” 9ì¼ êµìˆ˜ë‹˜ ë©´ë‹´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ
ì‹¤ì œ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ êµ¬ì²´ì ì¸ ë¬¸ì œì ê³¼ í•´ê²° ë°©ì•ˆì„ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.

í•µì‹¬ ë©”ì‹œì§€:
"ê¸°ëŠ¥ êµ¬í˜„ í›„ ì„¸ë¶€ì‚¬í•­ ì¶”ê°€" - êµìˆ˜ë‹˜
"í˜¸ì¶œ í•¨ìˆ˜ë¡œ ìˆœì°¨ ì‹¤í–‰" - êµìˆ˜ë‹˜
"ì£¼ê°„ 2% ê°œì„  ì¦ëª…" - êµìˆ˜ë‹˜

ë¬¸ì„œ ë²„ì „: 1.0.0
ë§ˆì§€ë§‰ ìˆ˜ì •: 2025-09-09
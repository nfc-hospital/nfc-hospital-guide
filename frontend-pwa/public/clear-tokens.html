<!DOCTYPE html>
<html>
<head>
    <title>토큰 정리</title>
</head>
<body>
    <h2>기존 토큰 정리</h2>
    <p>잘못된 형식의 기존 토큰을 정리합니다.</p>
    <button onclick="clearTokens()">토큰 정리</button>
    <div id="result"></div>

    <script>
        function clearTokens() {
            // 기존 토큰 제거
            localStorage.removeItem('access_token');
            localStorage.removeItem('refresh_token');
            localStorage.removeItem('user');
            localStorage.removeItem('accessToken'); // 혹시 남아있을 수도 있는 구 버전
            localStorage.removeItem('refreshToken'); // 혹시 남아있을 수도 있는 구 버전
            
            // 세션 스토리지도 정리
            sessionStorage.clear();
            
            document.getElementById('result').innerHTML = 
                '<p style="color: green;">✅ 모든 토큰이 정리되었습니다. 새로 로그인해주세요.</p>';
        }

        // 페이지 로드 시 현재 토큰 상태 표시
        window.onload = function() {
            const tokens = {
                'access_token': localStorage.getItem('access_token'),
                'refresh_token': localStorage.getItem('refresh_token'),
                'user': localStorage.getItem('user')
            };
            
            let html = '<h3>현재 저장된 토큰:</h3>';
            for (let key in tokens) {
                if (tokens[key]) {
                    html += `<p>${key}: ${tokens[key].substring(0, 50)}...</p>`;
                } else {
                    html += `<p>${key}: 없음</p>`;
                }
            }
            document.getElementById('result').innerHTML = html;
        }
    </script>
</body>
</html>
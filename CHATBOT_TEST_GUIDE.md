# 챗봇 컴포넌트 테스트 가이드

## 🚀 빠른 시작

1. **서버 실행**
```bash
# 챗봇 서버 실행 (포트 5000)
cd chatbot-server
npm run dev

# 백엔드 서버 실행 (포트 8000) 
cd backend/nfc_hospital_system
python manage.py runserver

# 프론트엔드 실행 (포트 5174)
cd frontend-pwa  
npm run dev
```

2. **테스트 페이지 접속**
```
http://localhost:5174/chatbot-test
```

## 🎯 테스트 기능

### 📱 기본 기능 테스트

#### 1. **플로팅 버튼**
- 우측 하단 챗봇 버튼 클릭
- 호버 시 도움말 텍스트 표시
- 새 메시지 알림 (빨간 점)
- 고령자 모드 시 더 큰 크기와 펄스 효과

#### 2. **팝업 챗봇**
- **드래그**: 헤더 드래그로 위치 이동
- **최소화**: 헤더 우측 화살표 버튼
- **전체화면**: 확대 버튼 (데스크톱)
- **설정 메뉴**: 톱니바퀴 버튼
  - 글자 크기 변경
  - 고대비 모드
  - 음성 읽기
  - 대화 내용 지우기

#### 3. **고령자 모드**
- 전체화면 큰 UI
- 글자 크기 조절 (18px → 26px)
- 메시지 한 개씩 표시
- 네비게이션 버튼으로 이전/다음
- 거대한 음성 입력 버튼
- 응급 도움 버튼

### 💬 메시지 타입 테스트

#### 텍스트 메시지
```
"안녕하세요"
"도움이 필요합니다"
```

#### 위치 정보 카드
```
"CT실이 어디에 있나요?"
"MRI실 위치 알려주세요"
"내과는 어디인가요?"
```

#### 대기 상태 카드  
```
"대기 시간이 얼마나 되나요?"
"몇 번까지 호출됐나요?"
"내 차례는 언제인가요?"
```

#### 체크리스트 카드
```
"CT 검사 준비사항이 뭔가요?"
"MRI 전에 뭘 준비해야 하나요?"
"검사 전 준비물을 알려주세요"
```

#### 경고 메시지
```
"응급상황입니다"
"도움이 급합니다" 
"병원 응급실 위치"
```

### 🎛️ 테스트 컨트롤 패널

#### 기본 설정
- ☑️ **고령자 모드**: UI 모드 전환
- ☑️ **챗봇 열기**: 챗봇 강제 열기/닫기  
- 🔔 **새 메시지 알림**: 알림 테스트
- 🔄 **데이터 초기화**: 모든 상태 리셋

#### 위치 정보 테스트
- **CT실**: 본관 3층 304호
- **MRI실**: 본관 2층 205호  
- **내과**: 본관 1층 101호

#### 대기 상태 테스트
- **대기 중**: 15번, 3명 대기, 20분 예상
- **호출됨**: 22번, 즉시 입실  
- **긴급**: 8번, 1명 대기, 5분 예상

#### 시나리오 테스트
1. **CT 검사 대기**: CT실 위치 + 대기 상태
2. **MRI 검사 호출**: MRI실 위치 + 호출됨 + 알림
3. **고령자 긴급**: 내과 + 긴급 상태 + 고령자 모드

## 🗣️ 음성 기능 테스트

### 음성 입력
- 🎤 버튼 클릭하여 음성 인식 시작
- 빨간색 녹음 상태 표시
- 음성을 텍스트로 변환하여 메시지 전송

### 음성 출력 (고령자 모드)
- 봇 메시지 자동으로 음성 읽기
- "다시 듣기" 버튼으로 재생
- 음성 켜기/끄기 토글

## 📱 반응형 테스트

### 데스크톱 (1024px+)
- 팝업 창 380x600px
- 드래그 가능
- 사이드바 모드 지원

### 태블릿 (768px~1024px)  
- 팝업 창 450x700px
- 터치 친화적 크기

### 모바일 (~768px)
- 전체화면 모드
- 큰 터치 타겟
- 하단 고정 입력창

## 🔧 개발자 도구

### 브라우저 콘솔에서 확인
```javascript
// 이벤트 리스너 확인
window.addEventListener('quick-reply-selected', console.log);
window.addEventListener('message-action', console.log);
window.addEventListener('card-action', console.log);

// 강제 이벤트 발송
window.dispatchEvent(new CustomEvent('emergency-help-requested'));
```

### 로컬 스토리지
```javascript
// 설정 확인
localStorage.getItem('chatbot-settings');

// 캐시된 FAQ 확인  
localStorage.getItem('chatbot-faq-cache');
```

## 🐛 알려진 이슈

1. **음성 인식**: Chrome/Edge에서만 지원 (webkit 기반)
2. **음성 출력**: HTTPS 환경에서 최적 동작
3. **드래그**: 모바일에서는 비활성화
4. **애니메이션**: `prefers-reduced-motion` 설정 시 비활성화

## 📋 체크리스트

### 필수 테스트
- [ ] 플로팅 버튼 클릭
- [ ] 팝업 열기/닫기  
- [ ] 텍스트 메시지 전송
- [ ] 빠른 답변 버튼
- [ ] 음성 입력 (Chrome)
- [ ] 고령자 모드 전환
- [ ] 위치 정보 표시
- [ ] 대기 상태 표시
- [ ] 모바일 반응형

### 고급 테스트
- [ ] 드래그 위치 이동
- [ ] 최소화/최대화
- [ ] 설정 메뉴
- [ ] 고대비 모드
- [ ] 글자 크기 변경
- [ ] 메시지 네비게이션 (고령자)
- [ ] 응급 도움 버튼
- [ ] 체크리스트 완료
- [ ] 면책조항 펼치기

## 🚀 다음 단계

1. **백엔드 연동**: 실제 API 응답 테스트
2. **WebSocket 연동**: 실시간 대기 상태 업데이트  
3. **PWA 기능**: 오프라인 모드, 푸시 알림
4. **접근성 테스트**: 스크린 리더, 키보드 네비게이션
5. **성능 테스트**: 대용량 메시지, 메모리 누수

---

문제가 발생하면 브라우저 콘솔을 확인하고, 네트워크 탭에서 API 호출을 모니터링하세요!
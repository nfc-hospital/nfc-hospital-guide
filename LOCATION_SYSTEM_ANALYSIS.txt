# í™˜ì ìœ„ì¹˜ ì‹œìŠ¤í…œ í˜„í™© ë¶„ì„ ë³´ê³ ì„œ
ìƒì„±ì¼: 2025-01-03
ì‘ì„±ì: Claude

=====================================================
## ğŸ“ í•µì‹¬ ë¬¸ì œ: ìœ„ì¹˜ ë°ì´í„°ì˜ 5ì¤‘ í‘œí˜„ ë°©ì‹ í˜¼ì¬
=====================================================

í˜„ì¬ ì‹œìŠ¤í…œì—ì„œ í™˜ì ìœ„ì¹˜ë¥¼ í‘œí˜„í•˜ëŠ” ë°©ì‹ì´ **ìµœì†Œ 5ê°€ì§€** ì´ìƒ í˜¼ì¬ë˜ì–´ ìˆìœ¼ë©°,
ê°ê° ë‹¤ë¥¸ êµ¬ì¡°ì™€ í˜•ì‹ì„ ì‚¬ìš©í•˜ì—¬ ì‹¬ê°í•œ ë¶ˆì¼ì¹˜ì™€ ì¤‘ë³µ ë¬¸ì œ ë°œìƒ

### ğŸš¨ ìœ„ì¹˜ í‘œí˜„ ë°©ì‹ ë¶„ë¥˜

1. **UUID ë°©ì‹** (36ìë¦¬ ë¬¸ìì—´)
   - PatientState.current_location
   - QueueStatusLog.location  
   - StateTransition.location_at_transition
   - ì˜ˆì‹œ: "123e4567-e89b-12d3-a456-426614174000"

2. **ì¢Œí‘œê³„ ë°©ì‹** (x, y ìˆ«ìê°’)
   - NFCTag: x_coord (Float), y_coord (Float)
   - Exam: x_coord (Float), y_coord (Float)
   - Frontend: x_coord, y_coord (ë•Œë¡œëŠ” Integerë¡œ ì‚¬ìš©)
   - ë²”ìœ„: 0.0 ~ 900.0 (ìŠ¤ì¼€ì¼ ê¸°ì¤€ ë¶ˆëª…í™•)

3. **ê±´ë¬¼/ì¸µ/í˜¸ì‹¤ ë°©ì‹** (í…ìŠ¤íŠ¸ ì¡°í•©)
   - NFCTag: building, floor (Int), room
   - Exam: building, floor (String), room
   - ì˜ˆì‹œ: "ë³¸ê´€", "2", "201í˜¸"

4. **íƒœê·¸ ID ì°¸ì¡° ë°©ì‹**
   - tag_id (UUID)
   - tag_uid (í•˜ë“œì›¨ì–´ ê³ ìœ ê°’)
   - code (ë³‘ì› ì •ì˜ ì½”ë“œ)

5. **ê²€ì‚¬ ID ì°¸ì¡° ë°©ì‹**
   - exam_idë¥¼ í†µí•œ ê°„ì ‘ ìœ„ì¹˜ ì°¸ì¡°
   - ê²€ì‚¬ì‹¤ ìœ„ì¹˜ = í™˜ì ìœ„ì¹˜ë¡œ ì¶”ì •

=====================================================
## ğŸ“Š Backend ìœ„ì¹˜ ë°ì´í„° êµ¬ì¡° ìƒì„¸ ë¶„ì„
=====================================================

### 1. PatientState ëª¨ë¸ (p_queue/models.py)
```python
class PatientState(models.Model):
    # ë¼ì¸ 377: UUID í˜•ì‹ ìœ„ì¹˜ (ì–´ë””ë¥¼ ê°€ë¦¬í‚¤ëŠ”ì§€ ë¶ˆëª…í™•)
    current_location = models.CharField(max_length=36, null=True, blank=True)
    
    # ë¼ì¸ 380-389: ê²€ì‚¬ ì°¸ì¡° (ìœ„ì¹˜ ê°„ì ‘ í‘œí˜„)
    current_exam = models.ForeignKey('appointments.Exam', ...)
```
**ë¬¸ì œì **:
- current_locationì´ UUIDì¸ë° ì–´ë–¤ í…Œì´ë¸”ì˜ IDì¸ì§€ ë¶ˆëª…í™•
- NFCTag.tag_idì¸ì§€, ì„ì˜ location_idì¸ì§€ ëª¨í˜¸
- current_examê³¼ current_locationì˜ ê´€ê³„ ë¶ˆëª…í™•

### 2. QueueStatusLog ëª¨ë¸ (p_queue/models.py)
```python
class QueueStatusLog(models.Model):
    # ë¼ì¸ 332-337: ë˜ ë‹¤ë¥¸ UUID í˜•ì‹ ìœ„ì¹˜
    location = models.CharField(
        max_length=36, 
        null=True, 
        blank=True, 
        verbose_name='ë³€ê²½ ì‹œì  ìœ„ì¹˜'
    )
```
**ë¬¸ì œì **:
- PatientState.current_locationê³¼ ë™ì¼í•œ í˜•ì‹ì´ì§€ë§Œ ì—°ê´€ì„± ë¶ˆëª…
- ìœ„ì¹˜ ë³€ê²½ ë¡œê·¸ì¸ë° ì •í™•íˆ ë¬´ì—‡ì„ ê¸°ë¡í•˜ëŠ”ì§€ ëª¨í˜¸

### 3. StateTransition ëª¨ë¸ (p_queue/models.py)
```python
class StateTransition(models.Model):
    # ë¼ì¸ 449: ìƒíƒœ ì „í™˜ ì‹œì ì˜ ìœ„ì¹˜
    location_at_transition = models.CharField(max_length=36, null=True, blank=True)
```
**ë¬¸ì œì **:
- ë˜ ë‹¤ë¥¸ UUID ìœ„ì¹˜ í•„ë“œ
- ë‹¤ë¥¸ location í•„ë“œë“¤ê³¼ì˜ ì¼ê´€ì„± ì—†ìŒ

### 4. NFCTag ëª¨ë¸ (nfc/models.py)
```python
class NFCTag(models.Model):
    # ë¼ì¸ 23-28: UUID ê¸°ë³¸í‚¤
    tag_id = models.UUIDField(primary_key=True, ...)
    
    # ë¼ì¸ 30-35: í•˜ë“œì›¨ì–´ UID
    tag_uid = models.CharField(max_length=255, unique=True, ...)
    
    # ë¼ì¸ 37-42: ë³‘ì› ì½”ë“œ
    code = models.CharField(max_length=100, unique=True, ...)
    
    # ë¼ì¸ 44-58: í…ìŠ¤íŠ¸ ìœ„ì¹˜
    building = models.CharField(max_length=100, ...)
    floor = models.IntegerField(...)
    room = models.CharField(max_length=100, ...)
    
    # ë¼ì¸ 66-76: ì¢Œí‘œ ìœ„ì¹˜
    x_coord = models.FloatField(default=0.0)
    y_coord = models.FloatField(default=0.0)
```
**ë¬¸ì œì **:
- í•œ ëª¨ë¸ì— 3ê°€ì§€ ID ì²´ê³„ (tag_id, tag_uid, code)
- ìœ„ì¹˜ë¥¼ í…ìŠ¤íŠ¸ì™€ ì¢Œí‘œ ë‘˜ ë‹¤ë¡œ í‘œí˜„ (ì¤‘ë³µ)
- floorëŠ” Integerì¸ë° Examì—ì„œëŠ” String

### 5. Exam ëª¨ë¸ (appointments/models.py)
```python
class Exam(models.Model):
    # ë¼ì¸ 52-74: í…ìŠ¤íŠ¸ ìœ„ì¹˜ (NFCTagì™€ íƒ€ì… ë¶ˆì¼ì¹˜)
    building = models.CharField(max_length=100, ...)
    floor = models.CharField(max_length=50, ...)  # String!
    room = models.CharField(max_length=100, ...)
    
    # ë¼ì¸ 76-86: ì¢Œí‘œ ìœ„ì¹˜
    x_coord = models.FloatField(default=0.0)
    y_coord = models.FloatField(default=0.0)
```
**ë¬¸ì œì **:
- NFCTag.floorëŠ” IntegerField, Exam.floorëŠ” CharField
- ê°™ì€ ìœ„ì¹˜ í‘œí˜„ì¸ë° ë°ì´í„° íƒ€ì… ë¶ˆì¼ì¹˜

=====================================================
## ğŸ’» Frontend ìœ„ì¹˜ ë°ì´í„° êµ¬ì¡° ìƒì„¸ ë¶„ì„
=====================================================

### 1. journeyStore.jsì˜ ìœ„ì¹˜ ê´€ë¦¬
```javascript
// ë¼ì¸ 100-109: í•˜ë“œì½”ë”©ëœ ìˆ˜ë‚©ì°½êµ¬ ìœ„ì¹˜
{
    exam_id: 'payment_desk',
    title: 'ìˆ˜ë‚©ì°½êµ¬',
    building: 'ë³¸ê´€',
    floor: '1',        // String
    room: 'ì›ë¬´ê³¼',
    x_coord: 420,      // Integer (BackendëŠ” Float)
    y_coord: 380,      // Integer
}

// ë¼ì¸ 283-292: getLocationInfo í•¨ìˆ˜
getLocationInfo: () => {
    const taggedLocationInfo = get().taggedLocationInfo;
    const nextExam = get().getNextExam();
    
    return {
        current: taggedLocationInfo,     // í˜„ì¬ ìœ„ì¹˜
        destination: nextExam,            // ëª©ì ì§€
        distance: calculateDistance(...) // ê±°ë¦¬ ê³„ì‚°
    };
}
```
**ë¬¸ì œì **:
- x_coord, y_coordë¥¼ Integerë¡œ ì‚¬ìš© (BackendëŠ” Float)
- floorë¥¼ Stringìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ NFCTag ëª¨ë¸ì€ Integer
- í•˜ë“œì½”ë”©ëœ ìœ„ì¹˜ ì •ë³´ ë‹¤ìˆ˜ ì¡´ì¬

### 2. mapStore.jsì˜ ìœ„ì¹˜ ê´€ë¦¬
```javascript
const useMapStore = create((set, get) => ({
    // í˜„ì¬ ìœ„ì¹˜
    currentLocation: null,
    
    // ëª©ì ì§€ ìœ„ì¹˜  
    destinationLocation: null,
    
    // ê²½ë¡œ ì •ë³´
    currentPath: [],
    
    // ì§€ë„ ì •ë³´
    currentBuilding: null,
    currentFloor: null,
}))
```
**ë¬¸ì œì **:
- journeyStoreì™€ ì¤‘ë³µëœ ìœ„ì¹˜ ì •ë³´ ì €ì¥
- currentLocationì˜ êµ¬ì¡°ê°€ ëª…í™•í•˜ì§€ ì•ŠìŒ
- ë‘ Store ê°„ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ ë¶€ì¬

### 3. ì»´í¬ë„ŒíŠ¸ë³„ ìœ„ì¹˜ ì‚¬ìš© ì˜ˆì‹œ

#### NFCReader.jsx
```javascript
const handleNFCScan = async (tagData) => {
    const locationInfo = {
        tag_id: tagData.id,
        building: tagData.building,
        floor: tagData.floor,
        room: tagData.room,
        x: tagData.x_coord,    // 'x'ë¡œ ì‚¬ìš©
        y: tagData.y_coord,    // 'y'ë¡œ ì‚¬ìš©
    };
    // ...
}
```
**ë¬¸ì œì **:
- x_coordë¥¼ 'x'ë¡œ, y_coordë¥¼ 'y'ë¡œ ë³€ê²½í•˜ì—¬ ì‚¬ìš©
- ì¼ê´€ì„± ì—†ëŠ” í•„ë“œëª…

#### MapViewer ì»´í¬ë„ŒíŠ¸ë“¤
```javascript
// InteractiveMapViewer.jsx
const markerPosition = {
    x: parseFloat(location.x_coord),
    y: parseFloat(location.y_coord),
};

// SimpleMapViewer.jsx  
const position = {
    x: location.x || location.x_coord,
    y: location.y || location.y_coord,
};
```
**ë¬¸ì œì **:
- ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì¢Œí‘œ ì ‘ê·¼
- x/yì™€ x_coord/y_coord í˜¼ìš©

=====================================================
## ğŸ”„ API ì‘ë‹µì—ì„œì˜ ìœ„ì¹˜ ë°ì´í„° ë¶ˆì¼ì¹˜
=====================================================

### 1. NFC ìŠ¤ìº” API ì‘ë‹µ (nfc/views.py)
```python
return Response({
    'location_info': {
        'tag_id': tag.tag_id,
        'building': tag.building,
        'floor': tag.floor,
        'room': tag.room,
        'description': tag.description,
        'coordinates': {
            'x': tag.x_coord,
            'y': tag.y_coord
        }
    }
})
```

### 2. Profile API ì‘ë‹µ (authentication/views.py)
```python
return Response({
    'patient_state': {
        'current_state': patient_state.current_state,
        'current_location': patient_state.current_location,  # UUID
        'current_exam': patient_state.current_exam_id
    }
})
```

### 3. Queue API ì‘ë‹µ (p_queue/views.py)
```python
return Response({
    'queue': {
        'exam': {
            'building': exam.building,
            'floor': exam.floor,
            'room': exam.room,
            'x_coord': exam.x_coord,
            'y_coord': exam.y_coord
        }
    }
})
```

**ë¬¸ì œì **:
- ê° APIë§ˆë‹¤ ë‹¤ë¥¸ êµ¬ì¡°ë¡œ ìœ„ì¹˜ ì •ë³´ ë°˜í™˜
- coordinates ê°ì²´ vs ì§ì ‘ x_coord/y_coord
- current_locationì€ UUIDì¸ë° ë‹¤ë¥¸ ê³³ì€ ê°ì²´

=====================================================
## ğŸ—ºï¸ ìœ„ì¹˜ ì¶”ì  í”Œë¡œìš° ë¶„ì„
=====================================================

### í™˜ì ìœ„ì¹˜ ì¶”ì  ì‹œë‚˜ë¦¬ì˜¤

1. **NFC íƒœê·¸ ìŠ¤ìº” ì‹œ**
   ```
   NFC íƒœê·¸ ìŠ¤ìº”
   â†’ NFCTag ëª¨ë¸ì—ì„œ ìœ„ì¹˜ ì¡°íšŒ (building, floor, room, x, y)
   â†’ TagLog ìƒì„± (tag_idë§Œ ì €ì¥)
   â†’ PatientState.current_location ì—…ë°ì´íŠ¸ (UUIDë¡œ ë³€í™˜?)
   â†’ Frontend journeyStore.taggedLocationInfo ì—…ë°ì´íŠ¸ (ê°ì²´ í˜•íƒœ)
   â†’ Frontend mapStore.currentLocation ì—…ë°ì´íŠ¸ (ì¤‘ë³µ)
   ```

2. **ê²€ì‚¬ì‹¤ ë„ì°© ì‹œ**
   ```
   ê²€ì‚¬ì‹¤ NFC ìŠ¤ìº”
   â†’ Exam ëª¨ë¸ì—ì„œ ìœ„ì¹˜ ì¡°íšŒ (ë‹¤ë¥¸ êµ¬ì¡°)
   â†’ Queue ìƒíƒœ ì—…ë°ì´íŠ¸ (ìœ„ì¹˜ ì •ë³´ ì—†ìŒ)
   â†’ QueueStatusLog.location ê¸°ë¡ (UUID?)
   â†’ StateTransition.location_at_transition ê¸°ë¡ (ë˜ ë‹¤ë¥¸ UUID)
   ```

3. **ë„¤ë¹„ê²Œì´ì…˜ ìš”ì²­ ì‹œ**
   ```
   í˜„ì¬ ìœ„ì¹˜: PatientState.current_location (UUID)
   â†’ UUIDë¡œ ì–´ë–¤ í…Œì´ë¸” ì¡°íšŒ? (ë¶ˆëª…í™•)
   ëª©ì ì§€: Examì˜ ìœ„ì¹˜ ì •ë³´ (building, floor, room, x, y)
   â†’ ì„œë¡œ ë‹¤ë¥¸ í˜•ì‹ìœ¼ë¡œ ê²½ë¡œ ê³„ì‚°?
   ```

=====================================================
## ğŸ”´ í•µì‹¬ ë¬¸ì œì  ìš”ì•½
=====================================================

### 1. **ë°ì´í„° ëª¨ë¸ ë¶ˆì¼ì¹˜**
- NFCTag.floor: IntegerField
- Exam.floor: CharField
- Frontend: Stringìœ¼ë¡œ í†µì¼ ì‚¬ìš©
- ê°™ì€ ê°œë…ì´ ë‹¤ë¥¸ íƒ€ì…ìœ¼ë¡œ ì €ì¥ë¨

### 2. **UUID ì°¸ì¡° ëª¨í˜¸ì„±**
- PatientState.current_locationì´ ë¬´ì—‡ì„ ê°€ë¦¬í‚¤ëŠ”ì§€ ë¶ˆëª…
- QueueStatusLog.locationê³¼ì˜ ê´€ê³„ ë¶ˆëª…
- Foreign Keyê°€ ì•„ë‹Œ CharFieldë¡œ ì €ì¥ë˜ì–´ ë¬´ê²°ì„± ë³´ì¥ ì•ˆë¨

### 3. **ì¢Œí‘œê³„ ë¶ˆì¼ì¹˜**
- Backend: Float (0.0 ~ 900.0)
- Frontend: ë•Œë¡œëŠ” Integerë¡œ ë³€í™˜
- ìŠ¤ì¼€ì¼/ë‹¨ìœ„ ì •ë³´ ì—†ìŒ
- ì§€ë„ë³„ ì¢Œí‘œê³„ ê¸°ì¤€ ë¶ˆëª…í™•

### 4. **ì¤‘ë³µ ì €ì¥**
- ê°™ì€ ìœ„ì¹˜ ì •ë³´ê°€ ì—¬ëŸ¬ ê³³ì— ì¤‘ë³µ ì €ì¥
- journeyStoreì™€ mapStoreì— ê°ê° ì €ì¥
- ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ ë¶€ì¬

### 5. **API ì‘ë‹µ ë¶ˆì¼ì¹˜**
- ê° APIë§ˆë‹¤ ë‹¤ë¥¸ êµ¬ì¡°ë¡œ ìœ„ì¹˜ ë°˜í™˜
- coordinates ê°ì²´ vs x_coord/y_coord ì§ì ‘ ë…¸ì¶œ
- ì¼ê´€ëœ Location ì¸í„°í˜ì´ìŠ¤ ë¶€ì¬

### 6. **í•˜ë“œì½”ë”©ëœ ìœ„ì¹˜**
- Frontendì— ìˆ˜ë‚©ì°½êµ¬, ì •ë¬¸, ì›ë¬´ê³¼ ë“± í•˜ë“œì½”ë”©
- Backendì™€ ë™ê¸°í™”ë˜ì§€ ì•Šì€ ì •ì  ë°ì´í„°
- ì‹¤ì œ ìœ„ì¹˜ ë³€ê²½ ì‹œ ì½”ë“œ ìˆ˜ì • í•„ìš”

=====================================================
## ğŸ’¡ ê°œì„  ë°©ì•ˆ ì œì•ˆ
=====================================================

### Phase 1: ë°ì´í„° ëª¨ë¸ í†µì¼

#### 1.1 Location ê¸°ë³¸ ëª¨ë¸ ìƒì„±
```python
class Location(models.Model):
    """ëª¨ë“  ìœ„ì¹˜ ì •ë³´ì˜ ê¸°ë³¸ ëª¨ë¸"""
    location_id = models.UUIDField(primary_key=True, default=uuid.uuid4)
    
    # í…ìŠ¤íŠ¸ ìœ„ì¹˜ (í‘œì¤€í™”)
    building = models.CharField(max_length=100)
    floor = models.IntegerField()  # Integerë¡œ í†µì¼
    room = models.CharField(max_length=100)
    
    # ì¢Œí‘œ ìœ„ì¹˜ (í‘œì¤€í™”)
    x_coord = models.FloatField()
    y_coord = models.FloatField()
    
    # ë©”íƒ€ ì •ë³´
    map_id = models.CharField(max_length=50)  # ì–´ëŠ ì§€ë„ì¸ì§€
    scale_factor = models.FloatField(default=1.0)  # ìŠ¤ì¼€ì¼ ì •ë³´
    
    class Meta:
        abstract = True  # ë˜ëŠ” ì‹¤ì œ í…Œì´ë¸”ë¡œ
```

#### 1.2 ê¸°ì¡´ ëª¨ë¸ ë¦¬íŒ©í† ë§
```python
class PatientState(models.Model):
    # CharField ëŒ€ì‹  ForeignKey ì‚¬ìš©
    current_location = models.ForeignKey(
        'NFCTag',  # ë˜ëŠ” Location
        on_delete=models.SET_NULL,
        null=True,
        related_name='current_patients'
    )
```

### Phase 2: Frontend íƒ€ì… ì •ì˜

#### 2.1 TypeScript ì¸í„°í˜ì´ìŠ¤
```typescript
interface Location {
    id: string;
    building: string;
    floor: number;  // numberë¡œ í†µì¼
    room: string;
    coordinates: {
        x: number;
        y: number;
    };
    mapId: string;
}

interface PatientLocation {
    current: Location | null;
    destination: Location | null;
    path: Location[];
    distance: number;
}
```

#### 2.2 Store í†µí•©
```javascript
// ë‹¨ì¼ locationStoreë¡œ í†µí•©
const useLocationStore = create((set, get) => ({
    // í™˜ì ìœ„ì¹˜ (Single Source of Truth)
    patientLocation: {
        current: null,
        destination: null,
        path: [],
    },
    
    // ìœ„ì¹˜ ì—…ë°ì´íŠ¸ (í•œ ê³³ì—ì„œë§Œ)
    updateCurrentLocation: (location) => {
        set(state => ({
            patientLocation: {
                ...state.patientLocation,
                current: location
            }
        }));
    },
}));
```

### Phase 3: API í‘œì¤€í™”

#### 3.1 í†µì¼ëœ Location Serializer
```python
class LocationSerializer(serializers.Serializer):
    """ëª¨ë“  APIì—ì„œ ì‚¬ìš©í•  í‘œì¤€ ìœ„ì¹˜ ì‹œë¦¬ì–¼ë¼ì´ì €"""
    id = serializers.UUIDField()
    building = serializers.CharField()
    floor = serializers.IntegerField()
    room = serializers.CharField()
    coordinates = serializers.SerializerMethodField()
    map_id = serializers.CharField()
    
    def get_coordinates(self, obj):
        return {
            'x': obj.x_coord,
            'y': obj.y_coord
        }
```

#### 3.2 API ì‘ë‹µ í†µì¼
```python
# ëª¨ë“  APIì—ì„œ ë™ì¼í•œ êµ¬ì¡° ì‚¬ìš©
return Response({
    'location': LocationSerializer(location).data,
    'patient_state': {
        'current_state': state,
        'current_location': LocationSerializer(current_loc).data,
        'destination': LocationSerializer(dest_loc).data,
    }
})
```

### Phase 4: ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš

1. **ë°ì´í„° íƒ€ì… í†µì¼**
   - Exam.floorë¥¼ IntegerFieldë¡œ ë³€ê²½
   - ë˜ëŠ” ëª¨ë‘ CharFieldë¡œ í†µì¼ (í˜¸í™˜ì„± ê³ ë ¤)

2. **UUID ì°¸ì¡° ì •ë¦¬**
   - current_locationì„ ëª…í™•í•œ ForeignKeyë¡œ
   - ë˜ëŠ” ìƒˆë¡œìš´ Location í…Œì´ë¸” ìƒì„±

3. **ì¢Œí‘œê³„ í‘œì¤€í™”**
   - ëª¨ë“  ì¢Œí‘œë¥¼ Floatë¡œ í†µì¼
   - ì§€ë„ë³„ ìŠ¤ì¼€ì¼ ì •ë³´ ì¶”ê°€

4. **ì¤‘ë³µ ì œê±°**
   - Frontend Store í†µí•©
   - í•˜ë“œì½”ë”©ëœ ìœ„ì¹˜ ì •ë³´ DBí™”

### Phase 5: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

1. **ë°ì´í„° ì¼ê´€ì„± í…ŒìŠ¤íŠ¸**
   ```python
   def test_location_consistency():
       # NFCTagì™€ Examì˜ floor íƒ€ì… ì¼ì¹˜ í™•ì¸
       # current_locationì´ ìœ íš¨í•œ ì°¸ì¡°ì¸ì§€ í™•ì¸
       # ì¢Œí‘œ ë²”ìœ„ê°€ ì ì ˆí•œì§€ í™•ì¸
   ```

2. **API ì‘ë‹µ í…ŒìŠ¤íŠ¸**
   ```python
   def test_api_location_format():
       # ëª¨ë“  APIê°€ ë™ì¼í•œ Location êµ¬ì¡° ë°˜í™˜í•˜ëŠ”ì§€
       # coordinates í•„ë“œê°€ ì¼ê´€ë˜ê²Œ ì œê³µë˜ëŠ”ì§€
   ```

3. **Frontend ë™ê¸°í™” í…ŒìŠ¤íŠ¸**
   ```javascript
   // Store ê°„ ìœ„ì¹˜ ì •ë³´ ë™ê¸°í™” í™•ì¸
   // íƒ€ì… ì•ˆì „ì„± ê²€ì¦
   ```

=====================================================
## ğŸ“ˆ ì˜ˆìƒ ê°œì„  íš¨ê³¼
=====================================================

1. **ë°ì´í„° ì¼ê´€ì„±**: 95% ì´ìƒ í–¥ìƒ
2. **ì½”ë“œ ì¤‘ë³µ**: 70% ê°ì†Œ
3. **ìœ ì§€ë³´ìˆ˜ì„±**: í¬ê²Œ ê°œì„ 
4. **ë²„ê·¸ ë°œìƒë¥ **: 60% ê°ì†Œ
5. **ê°œë°œ ìƒì‚°ì„±**: 40% í–¥ìƒ

=====================================================
## ğŸš€ ì‹¤í–‰ ìš°ì„ ìˆœìœ„
=====================================================

1. **ê¸´ê¸‰ (1ì£¼ ë‚´)**
   - Floor íƒ€ì… í†µì¼ (Integer or String ê²°ì •)
   - current_location UUID ëª…í™•í™”

2. **ì¤‘ìš” (2-3ì£¼)**
   - Location ëª¨ë¸/ì¸í„°í˜ì´ìŠ¤ í‘œì¤€í™”
   - API ì‘ë‹µ êµ¬ì¡° í†µì¼

3. **ê°œì„  (1ê°œì›”)**
   - Frontend Store í†µí•©
   - í•˜ë“œì½”ë”© ì œê±°

4. **ìµœì í™” (2ê°œì›”)**
   - ì¢Œí‘œê³„ í‘œì¤€í™”
   - ì„±ëŠ¥ ìµœì í™”

---
END OF ANALYSIS REPORT
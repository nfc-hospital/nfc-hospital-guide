# 🏥 병원 NFC 시스템 Django Admin 사용 가이드

## 📋 개요

이 가이드는 병원 NFC + AI 기반 검사·진료 안내 시스템의 Django Admin 사용법을 설명합니다. 의료 환경의 특수성과 개인정보 보호 원칙을 준수하여 설계되었습니다.

## 🎯 주요 특징

### ✅ 의료 환경 최적화
- **개인정보 보호**: 환자 정보 자동 마스킹 처리
- **의료진 친화적**: 직관적인 아이콘과 색상 코딩
- **고령층 배려**: 큰 글씨와 명확한 구분
- **실시간 모니터링**: 5초마다 자동 업데이트

### 🛡️ 보안 강화
- **권한별 접근 제어**: Super-Admin, Dept-Admin, Staff 구분
- **감사 로그**: 모든 관리자 행동 기록
- **세션 보안**: 자동 로그아웃 및 재인증
- **데이터 마스킹**: 민감정보 자동 보호

## 👥 사용자 역할별 권한

### 🔴 Super-Admin (시스템 관리자)
```
✅ 모든 데이터 접근 및 수정
✅ NFC 태그 등록/삭제/위치 변경
✅ 사용자 권한 관리
✅ 시스템 설정 변경
⚠️ 환자 개인정보도 마스킹 처리 표시
```

### 🔵 Dept-Admin (진료과별 관리자)
```
✅ 담당 진료과 관련 태그만 관리
✅ 해당 과 대기열 관리
✅ 검사 준비사항 수정
❌ 다른 과 데이터 접근 불가
❌ 시스템 전역 설정 변경 불가
```

### 🟢 Staff (일반 직원)
```
✅ 읽기 전용 대시보드 접근
✅ 실시간 현황 모니터링
✅ 간단한 태그 상태 확인
❌ 데이터 수정 권한 없음
```

## 🏷️ NFC 태그 관리

### 태그 현황 한눈에 보기
- **🟢 활성/🔴 비활성**: 태그 상태 색상 표시
- **📊 스캔 통계**: 오늘/이번주/이번달 사용량
- **📍 위치 정보**: 건물-층-호실 체계적 표시
- **⏰ 마지막 스캔**: 상대적 시간 표시 ("2시간 전")

### 주요 기능
```python
# 태그 대량 관리
✅ 선택된 태그 활성화/비활성화
📥 위치 정보 CSV 내보내기
🔍 실시간 스캔 현황 모니터링
```

### 보안 기능
- **태그 UID 마스킹**: `ABCD...5678` 형태로 표시
- **삭제 방지**: 비활성화로 대체 (이력 보존)
- **위치 변경 경고**: 기존 로그와의 연관성 확인

## 📊 스캔 로그 관리

### 개인정보 보호 원칙
```
환자 이름: 홍○○ 형태 마스킹
환자 ID: ***1234 형태 마스킹
생년월일: 1990년생만 표시
의료진: 이름과 역할 표시
```

### 실시간 모니터링
- **🔍 스캔**: 일반적인 태그 스캔
- **➡️ 입장**: 검사실/진료실 입장
- **⬅️ 퇴장**: 검사실/진료실 퇴장
- **❌ 오류**: 시스템 오류 발생
- **⏳ 대기**: 대기실 체크인

### 통계 및 분석
```python
📊 통계 보기 액션:
- 총 스캔 건수
- 액션 타입별 분포
- 상위 이용 위치 TOP 5
- 시간대별 활동 패턴
```

## 👤 사용자 관리

### 개인정보 마스킹 표시
```
의료진: 👨‍⚕️ 김의사 (이름 표시)
환자: 🏥 홍○○ (마스킹 처리)
이메일: h***@example.com
전화: 010-****-1234
생년: 1990년생
```

### 보안 강화 기능
- **🔐 비밀번호 재설정 강제**: 보안 사고 시 즉시 대응
- **📱 모든 디바이스 로그아웃**: 계정 탈취 방지
- **👥 사용자 활성화/비활성화**: 계정 관리
- **📥 익명화된 목록 내보내기**: 통계 분석용

### 디바이스 관리
- **활성 디바이스 수**: 비정상적 로그인 감지
- **로그인 기록**: 최근 5회 로그인 이력
- **신뢰 디바이스**: 자주 사용하는 디바이스 관리

## 📈 실시간 대시보드

### 접근 방법
```
Admin 메인 → 대시보드 링크 클릭
또는 직접 URL: /admin/dashboard/
```

### 주요 위젯

#### 📊 실시간 현황 카드
- **👥 현재 활성 사용자**: 1시간 내 로그인 사용자
- **🔍 오늘 스캔 수**: 당일 총 스캔 횟수
- **⏳ 현재 대기 인원**: 실시간 대기열 현황
- **🏷️ 활성 NFC 태그**: 정상 작동 태그 수

#### 🚨 긴급 알림
- **⏰ 장시간 대기**: 2시간 이상 대기 환자
- **🏷️ 비활성 태그**: 10개 이상 태그 오류
- **❌ 최근 오류**: 1시간 내 5건 이상 오류
- **💬 미처리 피드백**: 처리 대기 중인 피드백

#### 📍 위치별 현황
- **인기 위치 TOP 5**: 오늘 가장 많이 스캔된 위치
- **진료과별 대기**: 각 진료과 대기 인원
- **혼잡도 지도**: 최근 30분 활동량 기준
- **평균 대기시간**: 실시간 계산값

#### 💻 시스템 상태
- **🗄️ 데이터베이스**: 응답 시간 모니터링
- **📱 활성 디바이스**: 최근 1주일 내 접속
- **🔐 로그인 성공률**: 24시간 기준

### 자동 업데이트
- **5초마다**: 실시간 통계 업데이트
- **실시간 표시**: 🟢 LIVE 표시등
- **차트 자동 갱신**: 시간대별 활동량

## 🎨 UI/UX 특징

### 의료 환경 색상 체계
```css
🔴 위험/응급: #dc3545 (비활성, 오류, 경고)
🟢 안전/정상: #28a745 (활성, 성공, 완료)
🔵 정보/대기: #007bff (일반 정보, 진행 중)
🟡 주의/보류: #ffc107 (확인 필요, 주의사항)
```

### 접근성 최적화
- **최소 글자 크기**: 14px 이상
- **버튼 크기**: 44px × 44px (터치 최적화)
- **대비율**: WCAG 2.1 AA 기준 준수
- **키보드 네비게이션**: Tab 순서 최적화

### 정보 계층 구조
1. **1순위**: 실시간 상태 정보 (활성/비활성, 대기 인원)
2. **2순위**: 위치 및 기본 정보
3. **3순위**: 통계 및 이력 정보
4. **4순위**: 기술적 세부사항 (좌표, UUID 등)

## ⚠️ 주의사항 및 보안 수칙

### 의료법 준수사항
```
⚠️ 환자 개인정보는 의료법에 따라 보호됩니다.
⚠️ 업무 목적 외 열람 및 유출 시 법적 처벌을 받을 수 있습니다.
⚠️ 모든 접근 기록은 감사 로그에 저장됩니다.
⚠️ 의료적 판단이 아님을 명시, 참고용 정보임을 강조
```

### 보안 수칙
1. **세션 관리**: 업무 종료 시 반드시 로그아웃
2. **비밀번호**: 정기적으로 변경 (90일 권장)
3. **화면 잠금**: 자리 비울 시 화면 잠금
4. **데이터 내보내기**: 개인정보 제외된 파일만 사용
5. **권한 최소화**: 필요한 권한만 부여받아 사용

### 오류 대응
```
🔴 시스템 오류 발견 시:
1. 즉시 시스템 관리자에게 보고
2. 오류 화면 캡처 저장
3. 사용자에게 임시 대안 안내
4. 복구 완료까지 모니터링
```

## 📞 지원 및 문의

### 기술 지원
- **시스템 오류**: IT 지원팀 (내선 1234)
- **권한 문제**: 시스템 관리자
- **사용법 문의**: 교육 담당자

### 비상 연락처
- **응급 상황**: 즉시 시스템 관리자 연락
- **보안 사고**: 정보보안팀 즉시 신고
- **개인정보 유출**: 개인정보보호책임자 신고

---

**📚 추가 자료**
- [Django Admin 공식 문서](https://docs.djangoproject.com/en/5.2/ref/contrib/admin/)
- [의료정보시스템 보안 가이드라인](https://www.mohw.go.kr/)
- [개인정보보호법 시행령](https://www.privacy.go.kr/)

**🔄 문서 업데이트**
- 버전: 1.0.0
- 마지막 수정: 2025-01-24
- 다음 검토 예정: 2025-04-24